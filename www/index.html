<!DOCTYPE html>
<html lang="ru">
<head>
    	<meta charset="utf-8">
    	<meta name="viewport" content="width=device-width, initial-scale=1.0">
    	<title>Диспетчер СУ</title>
    	
<!-- JS -->     	
    	<!-- React -->
	<script src="scripts/react/unpkg.com_react@18.2.0_umd_react.production.min.js"></script>
	<script src="scripts/react/unpkg.com_react-dom@18.2.0_umd_react-dom.production.min.js"></script>
	<script src="scripts/react/unpkg.com_@babel_standalone@7.22.9_babel.min.js"></script>
	<!-- My React components -->
	<script type="text/babel" src="/scripts/react/button_components.js"></script>
	<script type="text/babel" src="/scripts/react/container_components.js"></script>
	<script type="text/babel" src="/scripts/react/line_components.js"></script>
	
	<script type="text/babel" src="/scripts/react/navigation_components.js"></script>
	<script type="text/babel" src="/scripts/react/panel_components.js"></script>
	<script type="text/babel" src="/scripts/react/form_components.js"></script>
	<script type="text/babel" src="/scripts/react/page_components.js"></script>
	<script type="text/babel" src="/scripts/react/main_components.js"></script>
	<script type="text/babel" src="/scripts/react/wasm_components.js"></script>
	
	<!-- React Router -->
	<script src='https://unpkg.com/react-router-dom@5.0.0/umd/react-router-dom.min.js'></script>
	
	<!-- AJAX -->
	<script src="/scripts/ajax/ajax.googleapis.com_ajax_libs_jquery_2.2.0_jquery.min.js"></script> 

	<!-- sevenSeg -->
	<script src="/scripts/sevenSeg/jquery-ui.min.js"></script>
	<script src="/scripts/sevenSeg/ajax.aspnetcdn.com_ajax_knockout_knockout-2.2.1.js"></script>
	<script src="/scripts/sevenSeg/sevenSeg.js"></script>

	<!-- Terminal -->
	<script src="/scripts/terminal/xterm.js"></script>
	<script src="/scripts/terminal/attach.js"></script>
	<script src="/scripts/terminal/fit.js"></script>
	<script defer src="/scripts/terminal/terminal.js"></script>

	<!-- Bootstrap -->
	<script src="/scripts/bootstrap/bootstrap.bundle.min.js"></script>
    	
    	<script src="/scripts/wasm/wasm_exec.js"></script>
    	
<!-- CSS -->    	
    	<!-- Bootstrap -->
	<link rel="stylesheet" href="/css/bootstrap/bootstrap.min.css" />
    	
	<!-- Terminal -->
    	<link rel="stylesheet" href="/css/terminal/xterm.css" />
    	<link rel="stylesheet" href="/css/terminal/style.css" />  
    	
    	<!-- My styles -->
    	<link rel="stylesheet" href="/css/styles.css" />  
</head>
  
<body>
<div id="application"></div>


<canvas id="cnvs" width="128" height="128"></canvas>

<script>
    const canvas = document.getElementById("cnvs");
    const ctx = canvas.getContext("2d");
    const cnvs_size = 128;
    const img_buf_size = cnvs_size * cnvs_size * 4;
    ctx.clearRect(0, 0, cnvs_size, cnvs_size);

    const memory = new WebAssembly.Memory({ initial: 1 });

    const importObject = {
      env: {
        buffer: memory,
        cnvs_size: cnvs_size,
        img_buf_size: img_buf_size,
      }
    };

    const image_data =
      new ImageData(new Uint8ClampedArray(memory.buffer, 0, img_buf_size), cnvs_size, cnvs_size);

    var animation_wasm;

    function animate() {
      animation_wasm();
      ctx.putImageData(image_data, 0, 0);
      requestAnimationFrame(animate);
    }

    (async () => {
      let obj = await WebAssembly.instantiateStreaming(fetch('sprite.wasm'),
        importObject);

      animation_wasm = obj.instance.exports.main;
      requestAnimationFrame(animate);
    })();
</script>


<!-- My scripts --> 
<script>
	// Сохраняем все параметры полученные от Web-сервера
	let UserName = "Test";//"{{ .UserName }}"; 
	let BackLink = "{{ .BackLink }}";
	console.log(UserName);
</script> 

<script src="/scripts/longpoll.js"></script>
<script src="/scripts/functions.js"></script>
<script src="/scripts/messages.js"></script>

<script type="text/babel" src="/scripts/app.js"></script>

</body>	
</html>

